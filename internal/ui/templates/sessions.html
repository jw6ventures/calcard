{{define "content"}}
<style>
    .sessions-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    .sessions-header h1 {
        margin: 0;
    }
    .sessions-list {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    .session-card {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        padding: 1.25rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .session-card.current {
        border-color: #667eea;
        background: #f7fafc;
    }
    .session-info {
        flex: 1;
    }
    .session-info h3 {
        margin: 0 0 0.5rem 0;
        font-size: 1rem;
        color: #1a202c;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    .session-info h3 .badge {
        font-size: 0.75rem;
        font-weight: 500;
    }
    .session-meta {
        font-size: 0.875rem;
        color: #718096;
    }
    .session-meta span {
        margin-right: 1rem;
    }
    .session-actions {
        display: flex;
        gap: 0.5rem;
    }
    .btn-revoke {
        background: #e53e3e;
        color: #fff;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.875rem;
    }
    .btn-revoke:hover {
        background: #c53030;
    }
    .btn-revoke:disabled {
        background: #a0aec0;
        cursor: not-allowed;
    }
    .btn-secondary {
        background: #edf2f7;
        color: #4a5568;
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.875rem;
    }
    .btn-secondary:hover {
        background: #e2e8f0;
    }
    .empty-state {
        text-align: center;
        padding: 3rem;
        color: #718096;
    }
    .flash-message {
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
        background: #c6f6d5;
        color: #22543d;
    }
</style>

<div class="sessions-header">
    <h1>Active Sessions</h1>
    {{if gt (len .Sessions) 1}}
    <form method="POST" action="/sessions/revoke-all" style="display: inline;">
        <input type="hidden" name="_csrf" value="{{.CSRFToken}}">
        <button type="submit" class="btn-secondary" onclick="return confirm('Revoke all other sessions?')">Revoke All Others</button>
    </form>
    {{end}}
</div>

{{if .FlashMessage}}
<div class="flash-message">
    {{if eq .FlashMessage "revoked"}}Session revoked successfully.{{end}}
    {{if eq .FlashMessage "all_revoked"}}All other sessions revoked.{{end}}
</div>
{{end}}

{{if .Sessions}}
<div class="sessions-list">
    {{range .Sessions}}
    <div class="session-card {{if .IsCurrent}}current{{end}}">
        <div class="session-info">
            <h3>
                {{if .UserAgent}}{{truncate .UserAgent 60}}{{else}}Unknown Device{{end}}
                {{if .IsCurrent}}<span class="badge">Current Session</span>{{end}}
            </h3>
            <div class="session-meta">
                {{if .IPAddress}}<span>IP: {{.IPAddress}}</span>{{end}}
                <span>Created: {{formatDateTime .CreatedAt}}</span>
                <span>Last seen: {{relativeTime .LastSeenAt}}</span>
                <span>Expires: {{formatDateTime .ExpiresAt}}</span>
            </div>
        </div>
        <div class="session-actions">
            {{if not .IsCurrent}}
            <form method="POST" action="/sessions/{{.ID}}/revoke">
                <input type="hidden" name="_csrf" value="{{$.CSRFToken}}">
                <button type="submit" class="btn-revoke">Revoke</button>
            </form>
            {{else}}
            <button class="btn-revoke" disabled title="Cannot revoke current session">Current</button>
            {{end}}
        </div>
    </div>
    {{end}}
</div>
{{else}}
<div class="empty-state">
    <p>No active sessions found.</p>
</div>
{{end}}
{{end}}
{{template "base" .}}

