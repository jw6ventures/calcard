{{define "content"}}
<h1>App Passwords</h1>
<p>Generate tokens for DAV clients. Creation flow will render the plain token once (TODO).</p>
<table>
    <tr><th>Label</th><th>Created</th><th>Expires</th><th>Last Used</th><th>Status</th></tr>
    {{range .AppPasswords}}
    <tr>
        <td>{{.label}}</td>
        <td>{{formatTime .created_at}}</td>
        <td>{{if .expires_at}}{{formatTime .expires_at}}{{else}}none{{end}}</td>
        <td>{{if .last_used}}{{formatTime .last_used}}{{else}}never{{end}}</td>
        <td>{{.status}}</td>
    </tr>
    {{else}}
    <tr><td colspan="5">No tokens issued yet.</td></tr>
    {{end}}
</table>
<form method="post" action="/app-passwords">
    <h3>Create new token</h3>
    <label>Label <input name="label" required></label>
    <label>Expires At (optional RFC3339) <input name="expires_at"></label>
    <button type="submit">Generate</button>
    <p><small>Server handler is TODO; storing tokens will hash the value and show the plaintext once.</small></p>
</form>
{{end}}
{{template "base" .}}
